# Oblako – Прогнозно време Progressive Web App

Oblako е модерно двуезично (български/английски) PWA приложение за прогноза на времето, разработено с React и Vite. Приложението поддържа офлайн режим, инсталиране на устройство, интерактивна карта, админ панел за статистики и спазва всички изисквания за поверителност и бисквитки.

## Основни функции
- **Прогноза за времето** с визуализации и графики
- **Интерактивна карта** (Leaflet) с възможност за избор на локация и показване на времето
- **PWA**: офлайн поддръжка, инсталация на началния екран, кеширане
- **Двуезичност**: български и английски език
- **Админ панел**: скрит достъп до статистики за посещения (само за администратори)
- **Банер за съгласие с бисквитки** (функционални и рекламни)
- **Страници с условия, поверителност и бисквитки**
- **Адаптивен дизайн** и sticky футър

## Инсталация и стартиране

1. **Инсталиране на зависимостите:**

```
npm install
```

2. **Стартиране на приложението в режим на разработка:**

```
npm run dev
```

3. **Билд за продукция:**

```
npm run build
```

4. **Преглед на продукционния билд:**

```
npm run preview
```

## PWA възможности
- Приложението може да се инсталира на мобилни и десктоп устройства.
- Работи офлайн благодарение на service worker и кеширане.
- Има валиден manifest.json с икони и настройки.

## Админ панел
- Достъпът до статистиките за посещения е скрит и защитен с парола.
- За достъп: натиснете иконата „информация“ 5 пъти, въведете паролата и ще видите статистиките.

## Интерактивна карта
- В долната част на страницата има карта (Leaflet), където може да изберете локация и да видите прогнозата за нея.

## Двуезичност
- Приложението поддържа български и английски език. Може да сменяте езика от менюто.

## Политики и съгласие
- При първо посещение се показва банер за съгласие с бисквитки (функционални и рекламни).
- Има отделни страници за:
  - [Условия за ползване](/terms)
  - [Политика за поверителност](/privacy)
  - [Политика за бисквитки](/cookies)

## Технологии
- React 18
- Vite
- Leaflet & react-leaflet
- Chart.js & react-chartjs-2
- ESLint

## Скриптове
- `npm run dev` – стартиране в режим на разработка
- `npm run build` – билд за продукция
- `npm run preview` – преглед на продукционния билд
- `npm run lint` – проверка за грешки в кода

---

© Oblako – Прогнозно време, 2024. Всички права запазени.

---

## Как да работи всичко коректно:

### 1. **Стартирай бекенд сървъра**
В терминала напиши:
```sh
node server.js
```
Трябва да видиш:
```
Visit tracker server running on http://localhost:4000
Stats available at http://localhost:4000/my-secret-stats-12345
```

---

### 2. **Добави изпращане на посещения от фронтенда**
В момента бекендът записва посещения само ако някой извика `/track-visit` с POST заявка.  
**Трябва да добавим код във фронтенда, който при всяко зареждане на сайта изпраща такава заявка!**

#### Пример (добави в App.jsx или main.jsx):
```js
useEffect(() => {
  fetch('http://localhost:4000/track-visit', { method: 'POST' });
}, []);
```
- Ако искаш да работи и от телефон, смени `localhost` с локалния IP на компютъра (например `192.168.1.5`).

---

### 3. **Провери дали AdminStats.jsx сочи към правилния адрес**
- Ако отваряш сайта от телефон, смени `API_URL` в AdminStats.jsx от:
  ```js
  const API_URL = `http://localhost:4000/my-secret-stats-12345`;
  ```
  на:
  ```js
  const API_URL = `http://192.168.1.5:4000/my-secret-stats-12345`;
  ```
  (замени с реалния IP на компютъра ти).

---

### 4. **Провери дали има файл `visits.json`**
- Той ще се създаде автоматично при първо посещение.

---

## Обобщено:
1. Стартирай `server.js`.
2. Добави изпращане на посещение от фронтенда.
3. Провери/смени адресите за достъп от други устройства.
4. Влез в AdminStats (7 клика, парола) и ще видиш посещенията!

---

**Искаш ли да добавя автоматично кода за изпращане на посещения във фронтенда?**  
Ако да – кажи в кой файл (App.jsx или main.jsx) да го сложа!
